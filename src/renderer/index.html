<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hintify SnapAssist AI</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="theme-dark">
    <div class="main-container">
        <!-- Top bar with logo and controls -->
        <div class="topbar">
            <div class="title-section">
                <img id="app-logo" src="" alt="Hintify SnapAssist AI" class="app-logo">
                <h1 class="app-title">Hintify SnapAssist AI</h1>
            </div>
            
            <div class="action-buttons">
                <button id="capture-btn" class="btn btn-primary" title="Capture Screenshot">
                    <img id="capture-icon" src="" alt="Capture" class="btn-icon">
                </button>
                <button id="settings-btn" class="btn btn-secondary" title="Settings">
                    <img id="settings-icon" src="" alt="Settings" class="btn-icon">
                </button>
                <!-- Authentication button - hidden when authenticated -->
                <button id="auth-btn" class="btn btn-auth hidden" title="Sign In" aria-label="Sign In to Hintify">
                    <span class="btn-text">Sign In</span>
                </button>
                <!-- User Account Section - hidden when not authenticated -->
                <div id="user-account-section" class="user-account-section hidden">
                    <div class="account-profile">
                        <img id="user-avatar" src="" alt="User" class="user-avatar">
                        <div class="account-details">
                            <span id="user-name" class="user-name">User</span>
                            <span id="account-email" class="account-email">user@example.com</span>
                            <div id="sync-status" class="sync-status">
                                <span class="sync-indicator active"></span>
                                <span class="sync-text">Synced</span>
                            </div>
                        </div>
                    </div>
                    <div class="account-menu">
                        <button id="account-menu-btn" class="account-menu-btn" title="Account Menu" aria-label="Open account menu">
                            <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
                                <circle cx="12" cy="12" r="1"/>
                                <circle cx="12" cy="5" r="1"/>
                                <circle cx="12" cy="19" r="1"/>
                            </svg>
                        </button>
                        <div id="account-dropdown" class="account-dropdown hidden">
                            <div class="dropdown-section">
                                <h4 class="dropdown-header">Account</h4>
                                <button id="view-profile-btn" class="dropdown-item">
                                    <span class="dropdown-icon">üë§</span>
                                    Profile Details
                                </button>
                                <button id="account-settings-btn" class="dropdown-item">
                                    <span class="dropdown-icon">‚öôÔ∏è</span>
                                    Account Settings
                                </button>
                            </div>
                            <div class="dropdown-section">
                                <h4 class="dropdown-header">Data</h4>
                                <button id="sync-data-btn" class="dropdown-item">
                                    <span class="dropdown-icon">üîÑ</span>
                                    Sync Data
                                </button>
                                <button id="transfer-data-btn" class="dropdown-item">
                                    <span class="dropdown-icon">üöÄ</span>
                                    Transfer to Portal
                                </button>
                                <button id="view-history-btn" class="dropdown-item">
                                    <span class="dropdown-icon">üìÖ</span>
                                    View History
                                </button>
                            </div>
                            <div class="dropdown-section">
                                <h4 class="dropdown-header">Export</h4>
                                <button id="export-json-btn" class="dropdown-item">
                                    <span class="dropdown-icon">üìÑ</span>
                                    Export as JSON
                                </button>
                                <button id="export-csv-btn" class="dropdown-item">
                                    <span class="dropdown-icon">üìä</span>
                                    Export as CSV
                                </button>
                            </div>
                            <div class="dropdown-separator"></div>
                            <button id="logout-btn" class="dropdown-item logout">
                                <span class="dropdown-icon">üö™</span>
                                Sign Out
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main content area -->
        <div class="content-area">
            <div class="text-container">
                <div id="hints-display" class="hints-display">
                    <div class="welcome-message">
                        <h2>Welcome to Hintify SnapAssist AI</h2>
                        <p>Your AI-powered study companion for instant hints and guidance.</p>
                        <div class="instructions">
                            <h3>Quick Start:</h3>
                            <ul>
                                <li>üì∏ Click <strong>Capture</strong> button to take a screenshot</li>
                                <li>üìã Copy an image and press <strong>Cmd/Ctrl+Shift+V</strong></li>
                                <li>‚å®Ô∏è Use global hotkey <strong>Cmd+Shift+H</strong> (Mac) or <strong>Ctrl+Shift+H</strong> (Windows)</li>
                                <li>ü§ñ AI analyzes your questions and provides helpful hints</li>
                            </ul>
                            <div class="setup-reminder">
                                <p><strong>First time?</strong> Make sure you've completed the setup process. If you skipped it, go to the app menu and select <strong>"Run Setup Again"</strong>.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status bar -->
        <div class="status-bar">
            <div class="status-section">
                <span id="status-text">Ready</span>
            </div>
            <div class="provider-section">
                <span id="provider-text">Provider: Loading...</span>
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loading-text">Processing image...</p>
        </div>
    </div>

    <!-- History Modal -->
    <div id="history-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Question & Answer History</h3>
                <button id="close-history-modal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="history-content" class="history-content">
                    <div class="loading-message">Loading history...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Details Modal -->
    <div id="profile-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Profile Details</h3>
                <button id="close-profile-modal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="profile-content" class="profile-content">
                    <div class="profile-section">
                        <div class="profile-avatar-section">
                            <img id="profile-avatar" src="" alt="Profile" class="profile-avatar">
                            <div class="profile-basic-info">
                                <h4 id="profile-name">User Name</h4>
                                <p id="profile-email">user@example.com</p>
                                <div class="profile-badges">
                                    <span id="email-verified-badge" class="badge verified hidden">‚úì Verified</span>
                                    <span id="sync-status-badge" class="badge synced">Synced</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-section">
                        <h5>Account Information</h5>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">Provider:</span>
                                <span id="profile-provider" class="detail-value">Unknown</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Account Created:</span>
                                <span id="profile-created" class="detail-value">Unknown</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Last Sign In:</span>
                                <span id="profile-last-signin" class="detail-value">Unknown</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Sync Status:</span>
                                <span id="profile-sync-status" class="detail-value">Active</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Settings Modal -->
    <div id="account-settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Account Settings</h3>
                <button id="close-account-settings-modal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="account-settings-content" class="account-settings-content">
                    <div class="settings-section">
                        <h5>Data Synchronization</h5>
                        <div class="setting-item">
                            <label class="setting-label" for="auto-sync-toggle">Auto-sync data to Portal:</label>
                            <div class="setting-control">
                                <input type="checkbox" id="auto-sync-toggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label" for="sync-frequency">Sync frequency:</label>
                            <select id="sync-frequency" class="setting-select">
                                <option value="realtime">Real-time</option>
                                <option value="hourly">Hourly</option>
                                <option value="daily" selected>Daily</option>
                                <option value="weekly">Weekly</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h5>Privacy Settings</h5>
                        <div class="setting-item">
                            <label class="setting-label" for="analytics-toggle">Share usage analytics:</label>
                            <div class="setting-control">
                                <input type="checkbox" id="analytics-toggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label" for="personal-data-toggle">Include personal data in exports:</label>
                            <div class="setting-control">
                                <input type="checkbox" id="personal-data-toggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h5>Account Actions</h5>
                        <div class="setting-actions">
                            <button id="force-sync-btn" class="btn btn-secondary">
                                <span class="btn-icon">üîÑ</span>
                                Force Sync Now
                            </button>
                            <button id="clear-local-data-btn" class="btn btn-warning">
                                <span class="btn-icon">üóëÔ∏è</span>
                                Clear Local Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
