<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hintify</title>
    
    <!-- Material-UI Fonts and Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="glassy-theme.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/mhchem.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>

</head>
<body class="theme-dark material-ui">
    <div class="main-container">
        <!-- Top bar with logo and controls -->
        <div class="topbar">
            <div class="title-section">
                <img id="app-logo" src="" alt="Hintify" class="app-logo">
                <h1 class="app-title">Hintify</h1>
            </div>

            <div class="action-buttons">
                <button id="capture-btn" class="btn btn-primary material-btn" title="Capture Screenshot" aria-label="Capture Screenshot">
                    <span class="material-icons">screenshot</span>
                    <span class="btn-text">Capture</span>
                </button>
                <button id="settings-btn" class="btn btn-secondary material-btn" title="Settings" aria-label="Settings">
                    <span class="material-icons">settings</span>
                </button>
            </div>
        </div>

        <!-- Update banner -->
        <div id="update-banner" class="update-banner hidden" aria-live="polite">
            <div class="update-info">
                <span class="update-title">A new version is available</span>
                <span id="update-version" class="update-version"></span>
            </div>
            <div class="update-actions">
                <button id="update-now-btn" class="btn btn-primary">Update Now</button>
                <button id="dismiss-update-btn" class="btn btn-secondary">Later</button>
            </div>
            <div id="update-progress" class="update-progress hidden">
                <div class="progress-bar"><div id="update-progress-fill" class="progress-fill" style="width:0%"></div></div>
                <span id="update-progress-text" class="progress-text">Preparing...</span>
            </div>
        </div>


        <!-- Main content area -->
        <div class="content-area">
            <div class="text-container">
                <div id="hints-display" class="hints-display">
                    <div class="welcome-message material-welcome">
                        <div class="welcome-icon">
                            <span class="material-icons" style="font-size: 64px; color: #667eea;">school</span>
                        </div>
                        <h2>Welcome to Hintify</h2>
                        <p class="subtitle">Your AI-powered study companion for instant hints and guidance</p>
                        <div class="instructions material-instructions">
                            <h3>
                                <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">rocket_launch</span>
                                Quick Start
                            </h3>
                            <div class="instruction-grid">
                                <div class="instruction-card">
                                    <span class="material-icons">photo_camera</span>
                                    <h4>Capture Screenshot</h4>
                                    <p>Click the <strong>Capture</strong> button to take a screenshot</p>
                                </div>
                                <div class="instruction-card">
                                    <span class="material-icons">content_paste</span>
                                    <h4>From Clipboard</h4>
                                    <p>Copy an image and press <strong>Cmd/Ctrl+Shift+V</strong></p>
                                </div>
                                <div class="instruction-card">
                                    <span class="material-icons">keyboard</span>
                                    <h4>Global Hotkey</h4>
                                    <p><strong>Cmd+Shift+H</strong> (Mac) or <strong>Ctrl+Shift+H</strong> (Windows)</p>
                                </div>
                                <div class="instruction-card">
                                    <span class="material-icons">psychology</span>
                                    <h4>AI Analysis</h4>
                                    <p>AI analyzes your questions and provides helpful hints</p>
                                </div>
                            </div>
                            <div class="setup-reminder material-reminder">
                                <span class="material-icons">info</span>
                                <div>
                                    <strong>First time?</strong>
                                    <p>Make sure you've completed the setup process. If you skipped it, go to the app menu and select <strong>"Run Setup Again"</strong>.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status bar -->
        <div class="status-bar">
            <div class="status-section">
                <span id="status-text">Ready</span>
            </div>
            <div class="status-section" style="margin-left:auto; display:flex; align-items:center; gap:8px;">
                <label for="mode-toggle" class="mode-toggle-label" title="Toggle between Standard (OCR) and Advanced (Direct Vision) modes" style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                    <input type="checkbox" id="mode-toggle" style="accent-color: var(--accent, #6ea8fe); cursor:pointer;">
                    <span id="mode-toggle-text">Advanced Mode</span>
                </label>
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loading-text">Processing image...</p>
        </div>
    </div>

    <!-- History Modal -->
    <div id="history-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Question & Answer History</h3>
                <button id="close-history-modal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="history-content" class="history-content">
                    <div class="loading-message">Loading history...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Details Modal -->
    <div id="profile-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Profile Details</h3>
                <button id="close-profile-modal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="profile-content" class="profile-content">
                    <div class="profile-section">
                        <div class="profile-avatar-section">
                            <img id="profile-avatar" src="" alt="Profile" class="profile-avatar">
                            <div class="profile-basic-info">
                                <h4 id="profile-name">User Name</h4>
                                <p id="profile-email">user@example.com</p>
                                <div class="profile-badges">
                                    <span id="email-verified-badge" class="badge verified hidden">✓ Verified</span>
                                    <span id="sync-status-badge" class="badge synced">Synced</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-section">
                        <h5>Account Information</h5>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">Provider:</span>
                                <span id="profile-provider" class="detail-value">Unknown</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Account Created:</span>
                                <span id="profile-created" class="detail-value">Unknown</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Last Sign In:</span>
                                <span id="profile-last-signin" class="detail-value">Unknown</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Sync Status:</span>
                                <span id="profile-sync-status" class="detail-value">Active</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Settings Modal -->
    <div id="account-settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Account Settings</h3>
                <button id="close-account-settings-modal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="account-settings-content" class="account-settings-content">
                    <div class="settings-section">
                        <h5>Data Synchronization</h5>
                        <div class="setting-item">
                            <label class="setting-label" for="auto-sync-toggle">Auto-sync data to Portal:</label>
                            <div class="setting-control">
                                <input type="checkbox" id="auto-sync-toggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label" for="sync-frequency">Sync frequency:</label>
                            <select id="sync-frequency" class="setting-select">
                                <option value="realtime">Real-time</option>
                                <option value="hourly">Hourly</option>
                                <option value="daily" selected>Daily</option>
                                <option value="weekly">Weekly</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h5>Privacy Settings</h5>
                        <div class="setting-item">
                            <label class="setting-label" for="analytics-toggle">Share usage analytics:</label>
                            <div class="setting-control">
                                <input type="checkbox" id="analytics-toggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label" for="personal-data-toggle">Include personal data in exports:</label>
                            <div class="setting-control">
                                <input type="checkbox" id="personal-data-toggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h5>Account Actions</h5>
                        <div class="setting-actions">
                            <button id="force-sync-btn" class="btn btn-secondary">
                                <span class="btn-icon">🔄</span>
                                Force Sync Now
                            </button>
                            <button id="clear-local-data-btn" class="btn btn-warning">
                                <span class="btn-icon">🗑️</span>
                                Clear Local Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings are now handled in a separate window -->
    <!-- Embedded settings modal removed -->

    <script src="renderer.js"></script>
</body>
</html>
