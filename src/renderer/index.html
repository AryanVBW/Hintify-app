<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hintify</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/mhchem.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>

</head>
<body class="theme-dark">
    <div class="main-container">
        <!-- Top bar with logo and controls -->
        <div class="topbar">
            <div class="title-section">
                <img id="app-logo" src="" alt="Hintify" class="app-logo">
                <h1 class="app-title">Hintify</h1>
            </div>

            <div class="action-buttons">
                <button id="capture-btn" class="btn btn-primary" title="Capture Screenshot" aria-label="Capture Screenshot">
                    <img id="capture-icon" class="btn-icon" alt="Capture" src="" />
                </button>
                <button id="settings-btn" class="btn btn-secondary" title="Settings" aria-label="Settings">
                    <img id="settings-icon" class="btn-icon" alt="Settings" src="" />
                </button>

            </div>
        </div>

        <!-- Update banner -->
        <div id="update-banner" class="update-banner hidden" aria-live="polite">
            <div class="update-info">
                <span class="update-title">A new version is available</span>
                <span id="update-version" class="update-version"></span>
            </div>
            <div class="update-actions">
                <button id="update-now-btn" class="btn btn-primary">Update Now</button>
                <button id="dismiss-update-btn" class="btn btn-secondary">Later</button>
            </div>
            <div id="update-progress" class="update-progress hidden">
                <div class="progress-bar"><div id="update-progress-fill" class="progress-fill" style="width:0%"></div></div>
                <span id="update-progress-text" class="progress-text">Preparing...</span>
            </div>
        </div>


        <!-- Main content area -->
        <div class="content-area">
            <div class="text-container">
                <div id="hints-display" class="hints-display">
                    <div class="welcome-message">
                        <h2>Welcome to Hintify</h2>
                        <p>Your AI-powered study companion for instant hints and guidance.</p>
                        <div class="instructions">
                            <h3>Quick Start:</h3>
                            <ul>
                                <li>üì∏ Click <strong>Capture</strong> button to take a screenshot</li>
                                <li>üìã Copy an image and press <strong>Cmd/Ctrl+Shift+V</strong></li>
                                <li>‚å®Ô∏è Use global hotkey <strong>Cmd+Shift+H</strong> (Mac) or <strong>Ctrl+Shift+H</strong> (Windows)</li>
                                <li>ü§ñ AI analyzes your questions and provides helpful hints</li>
                            </ul>
                            <div class="setup-reminder">
                                <p><strong>First time?</strong> Make sure you've completed the setup process. If you skipped it, go to the app menu and select <strong>"Run Setup Again"</strong>.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status bar -->
        <div class="status-bar">
            <div class="status-section">
                <span id="status-text">Ready</span>
            </div>
            <div class="status-section" style="margin-left:auto; display:flex; align-items:center; gap:8px;">
                <label for="mode-toggle" class="mode-toggle-label" title="Toggle between Standard (OCR) and Advanced (Direct Vision) modes" style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                    <input type="checkbox" id="mode-toggle" style="accent-color: var(--accent, #6ea8fe); cursor:pointer;">
                    <span id="mode-toggle-text">Advanced Mode</span>
                </label>
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loading-text">Processing image...</p>
        </div>
    </div>

    <!-- History Modal -->
    <div id="history-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Question & Answer History</h3>
                <button id="close-history-modal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="history-content" class="history-content">
                    <div class="loading-message">Loading history...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Details Modal -->
    <div id="profile-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Profile Details</h3>
                <button id="close-profile-modal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="profile-content" class="profile-content">
                    <div class="profile-section">
                        <div class="profile-avatar-section">
                            <img id="profile-avatar" src="" alt="Profile" class="profile-avatar">
                            <div class="profile-basic-info">
                                <h4 id="profile-name">User Name</h4>
                                <p id="profile-email">user@example.com</p>
                                <div class="profile-badges">
                                    <span id="email-verified-badge" class="badge verified hidden">‚úì Verified</span>
                                    <span id="sync-status-badge" class="badge synced">Synced</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-section">
                        <h5>Account Information</h5>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">Provider:</span>
                                <span id="profile-provider" class="detail-value">Unknown</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Account Created:</span>
                                <span id="profile-created" class="detail-value">Unknown</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Last Sign In:</span>
                                <span id="profile-last-signin" class="detail-value">Unknown</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Sync Status:</span>
                                <span id="profile-sync-status" class="detail-value">Active</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Settings Modal -->
    <div id="account-settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Account Settings</h3>
                <button id="close-account-settings-modal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="account-settings-content" class="account-settings-content">
                    <div class="settings-section">
                        <h5>Data Synchronization</h5>
                        <div class="setting-item">
                            <label class="setting-label" for="auto-sync-toggle">Auto-sync data to Portal:</label>
                            <div class="setting-control">
                                <input type="checkbox" id="auto-sync-toggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label" for="sync-frequency">Sync frequency:</label>
                            <select id="sync-frequency" class="setting-select">
                                <option value="realtime">Real-time</option>
                                <option value="hourly">Hourly</option>
                                <option value="daily" selected>Daily</option>
                                <option value="weekly">Weekly</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h5>Privacy Settings</h5>
                        <div class="setting-item">
                            <label class="setting-label" for="analytics-toggle">Share usage analytics:</label>
                            <div class="setting-control">
                                <input type="checkbox" id="analytics-toggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label" for="personal-data-toggle">Include personal data in exports:</label>
                            <div class="setting-control">
                                <input type="checkbox" id="personal-data-toggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h5>Account Actions</h5>
                        <div class="setting-actions">
                            <button id="force-sync-btn" class="btn btn-secondary">
                                <span class="btn-icon">üîÑ</span>
                                Force Sync Now
                            </button>
                            <button id="clear-local-data-btn" class="btn btn-warning">
                                <span class="btn-icon">üóëÔ∏è</span>
                                Clear Local Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- App Settings Modal (embedded settings.html inside main window) -->
    <div id="app-settings-modal" class="modal hidden">
        <div class="modal-content" style="width: 92vw; height: 85vh; max-width: 1100px;">
            <div class="modal-header">
                <h3>Settings</h3>
                <button id="close-app-settings-modal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body" style="padding: 0; height: calc(100% - 56px);">
                <iframe id="app-settings-iframe" src="about:blank" style="border:0; width:100%; height:100%;" title="App Settings"></iframe>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
